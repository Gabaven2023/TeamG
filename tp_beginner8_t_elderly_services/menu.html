<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>初心者向けホームページテンプレート tp_beginner8</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="ここにサイト説明を入れます">
<link rel="stylesheet" href="css/style.css">
</head>

<body>

<div id="container">

<div id="contents">

<header>
<h1 id="logo"><a href="index.html"><img src="images/logo.png" alt="SAMPLE LOGO"></a></h1>
</header>

<div id="menubar">
<nav>
<ul>
<li><a href="index.html">ホーム</a></li>
<li><a href="greeting.html">ご挨拶</a></li>
<li><a href="menu.html">サービス紹介</a></li>
<li><a href="access.html">アクセス</a></li>
</ul>
</nav>
</div>
<!--/#menubar-->

<main>

<section>

<h2>サービス紹介</h2>

<div class="list-simple">
<figure><img src="images/1.jpg" alt=""></figure>
<h3>ここはタイトル</h3>
<p>ここに説明などを入れます。</p>
</div>

<div class="list-simple">
<figure><img src="images/2.jpg" alt=""></figure>
<h3>ここはタイトル</h3>
<p>ここに説明などを入れます。</p>
</div>

<div class="list-simple">
<figure><img src="images/3.jpg" alt=""></figure>
<h3>ここはタイトル</h3>
<p>ここに説明などを入れます。</p>

  
// 要素の取得
const loveMe = document.querySelector('.loveMe')
const times = document.querySelector('#times')

// クリック時間の制御
let clickTime = 0

// いいね数をカウント
let timesClicked = 0

// クリックイベントの登録
loveMe.addEventListener('click', (e) => {
  if(clickTime === 0) {
    clickTime = new Date().getTime() // UNIX TIMEでデータを取得できる
  } else {
    if((new Date().getTime() - clickTime) < 800) {
      createHeart(e)
      clickTime = 0 // 初期化
    } else {
      clickTime = new Date().getTime()
    }
  }
})

// ハートの作成
const createHeart = (e) => {
  // https://fontawesome.com/
  const heart = document.createElement('i')
  heart.classList.add('fas')
  heart.classList.add('fa-heart')

  const {xInside, yInside} = culcPosition(e)

  // ハートの位置を指定
  // スタイルの.loveMe .fa-heart {}にてposition: absolute;を
  // 指定しているため、位置を制御できる
  heart.style.top = `${yInside}px`
  heart.style.left = `${xInside}px`

  // 子要素として追加
  loveMe.appendChild(heart)

  // いいね数を増加して挿入
  times.innerHTML = ++timesClicked

  // クリックするとハート要素が無限に増えていくため、5秒後に削除
  setTimeout(() => heart.remove(), 5000)
}

// 要素を出す位置を計算
function culcPosition(e) {
  // クリックした位置を取得
  const x = e.clientX
  const y = e.clientY

  // ページからみて画像の位置を取得
  const leftOffset = e.target.offsetLeft
  const topOffset = e.target.offsetTop

  // ハートを出す位置を制御
  // 画像の位置とクリック位置から計算
  const xInside = x - leftOffset
  const yInside = y - topOffset

  return {xInside, yInside}
}
    
    
    
</div>

<div class="list-simple">
<h3>ここはタイトル</h3>
<p>画像を使わない場合はこんな感じ</p>
</div>

<div class="list-simple">
<h3>ここはタイトル</h3>
<p>画像を使わない場合はこんな感じ</p>
</div>

<div class="list-simple">
<h3>ここはタイトル</h3>
<p>画像を使わない場合はこんな感じ</p>
</div>

<div class="list-simple">
<h3>ここはタイトル</h3>
<p>画像を使わない場合はこんな感じ</p>
</div>

</section>

</main>

</div>
<!--/#contents-->

<footer>
<small>Copyright&copy; <a href="index.html">サイト名</a> All Rights Reserved.</small>
<span class="pr"><a href="https://template-party.com/" target="_blank">《Web Design:Template-Party》</a></span>
</footer>

<!--ページの上部へ戻るボタン-->
<div class="pagetop"><a href="#"><i class="fas fa-angle-double-up"></i></a></div>

</div>
<!--/#container-->

<!--jQueryの読み込み-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<!--このテンプレート専用のスクリプト-->
<script src="js/main.js"></script>

</body>
</html>
